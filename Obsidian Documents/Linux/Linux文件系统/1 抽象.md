-————————————————陈硕B站课程
>发展过程

Unix -> BSD fast fs -> EXT2 -> EXT3/4

# 文件抽象

文件 = 字节
用户来解释文件内容：图片文本可执行程序

10个关键的系统调用：
- open/close
- read/write/lseek
- fstat/ftruncate
- unlink/mkdir/dup
unlink将其引用计数-1.

# 文件系统抽象

map<string, string> ： 从文件名映射到文件内容
![](Pasted%20image%2020230701124523.png)

map<string, File> ： 从文件路径映射到文件File

# Unix文件抽象

inode：index node
typedef uint32_t inode_num_t;   // 一个文件系统中唯一
map<string, inode_num_t> dirs； // 映射路径到inode
map<inode_num_t, string> files;  // inode映射到文件内容
或者
map<inode_num_t, File> files;  

以上路径，文件内容都可能重复。但inode是唯一的

# 磁盘抽象：块设备

## 物理结构

![](Pasted%20image%2020230701124939.png)
LBA表示唯一扇区。
512B. 2010年后为4K.

LBA表示法之前为三维柱坐标：CHS cylinder/head/sector。

## 逻辑结构

将磁盘抽象成一个块设备。文件系统使用逻辑结构

![](Pasted%20image%2020230701125201.png)
逻辑上是block。典型为1K.

## 文件系统调用

![](Pasted%20image%2020230701125346.png)
使用其逻辑结构。